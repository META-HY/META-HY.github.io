{"title":"UE4智慧城市可视化学习笔记1-模型及贴图处理","uid":"90888fe2a1166f81331a30c966099b59","slug":"Design_UE4ZhiHuiChengShi1","date":"2023-01-01T00:00:00.000Z","updated":"2023-03-18T06:58:40.000Z","comments":true,"path":"api/articles/Design_UE4ZhiHuiChengShi1.json","keywords":null,"cover":"https://img2.baidu.com/it/u=1296948753,1240784421&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=281","content":"<h3 id=\"1-使用QGIS获取地图数据数据\"><a href=\"#1-使用QGIS获取地图数据数据\" class=\"headerlink\" title=\"1.使用QGIS获取地图数据数据\"></a>1.使用QGIS获取地图数据数据</h3><p>QGIS获取网址为<a href=\"https://github.com/qgis/QGIS\">https://github.com/qgis/QGIS</a></p>\n<h5 id=\"1-1-处理建筑数据\"><a href=\"#1-1-处理建筑数据\" class=\"headerlink\" title=\"1.1 处理建筑数据\"></a>1.1 处理建筑数据</h5><p>QGIS默认状态下为英文，可以参照下图改为中文，确定后重新打开QGIS Desktop就是中文模式。</p>\n<p><img src=\"https://s3.bmp.ovh/imgs/2022/09/03/5fff0599a53f67a1.png\" alt=\"QGIS改中文\"></p>\n<p>如果有本地的.shp数据则打开QGIS Desktop 导入本地的.shp数据（直接将文件拖进QGIS），这里以<code>南京.SHP</code>为例；如果没有则按照下文<code>获取道路数据</code>的方式进行建筑数据的获取（关键词building，<code>画布范围</code>改为<code>位于</code>并输入自己需要的省份或市名称拼音）。缩放到需要的位置，左下角图层位置在南京图层上右击，选择<code>导出-要素另存为</code>；文件名设置为Nanjing（任意名即可）；格式选择<code>ESRI Shapefile</code>，CRS选择<code>EPSG:3857</code>（找不到的话点击右侧图标搜索3857），点击OK等待导出。导出成功后左下角会多一个<code>Nanjing</code>图层，此时可以移除<code>南京</code>图层。</p>\n<p><img src=\"https://s3.bmp.ovh/imgs/2022/09/03/1ebece8c45961eff.png\" alt=\"地图格式选择\"><br><img src=\"https://s3.bmp.ovh/imgs/2022/09/03/a59a0e99dbfb9b56.png\" alt=\"导出后\"></p>\n<h5 id=\"1-2-安装quickOSM获取道路数据\"><a href=\"#1-2-安装quickOSM获取道路数据\" class=\"headerlink\" title=\"1.2 安装quickOSM获取道路数据\"></a>1.2 安装quickOSM获取道路数据</h5><p>获取道路数据需要安装插件：在上方<code>工具栏-插件-管理并安装插件</code>，搜索<code>quickOSM</code>，选中之后点击安装插件。</p>\n<h5 id=\"1-3-使用QuickOSM获取道路数据\"><a href=\"#1-3-使用QuickOSM获取道路数据\" class=\"headerlink\" title=\"1.3 使用QuickOSM获取道路数据\"></a>1.3 使用QuickOSM获取道路数据</h5><p>点击左上角QuickOSM插件（图标为绿色背景的放大镜），具体设置参照图片。</p>\n<p><img src=\"https://s3.bmp.ovh/imgs/2022/08/02/5593cdf391bb973f.png\" alt=\"QuickOSM图标\"></p>\n<h5 id=\"1-4-导出道路数据\"><a href=\"#1-4-导出道路数据\" class=\"headerlink\" title=\"1.4 导出道路数据\"></a>1.4 导出道路数据</h5><p>具体的方法与上文<code>处理建筑数据</code>一致。</p>\n<h5 id=\"1-5-获取当前区域范围\"><a href=\"#1-5-获取当前区域范围\" class=\"headerlink\" title=\"1.5 获取当前区域范围\"></a>1.5 获取当前区域范围</h5><p>点击左上角图标新建<code>临时图层</code>，具体参数见图。然后点击<code>编辑-添加矩形-由范围添加矩形</code>，然后选取整个地图窗口。导出矩形范围（具体的方法与上文<code>处理建筑数据</code>一致）。</p>\n<p><img src=\"https://s3.bmp.ovh/imgs/2022/08/02/ba1d6e9e35704add.png\" alt=\"临时图层位置\"><br><img src=\"https://s3.bmp.ovh/imgs/2022/08/02/735c28e88c13d2ed.png\" alt=\"临时图层参数设置\"></p>\n<h3 id=\"2-Bigmap获取矩形范围卫星地图\"><a href=\"#2-Bigmap获取矩形范围卫星地图\" class=\"headerlink\" title=\"2.Bigmap获取矩形范围卫星地图\"></a>2.Bigmap获取矩形范围卫星地图</h3><p>bigmap获取网址为<a href=\"http://download.bigemap.com/bmsetup.rar%EF%BC%88%E5%8F%AF%E4%BB%A5%E8%81%94%E7%B3%BBbigmap%E5%AE%98%E6%96%B9%E5%AE%A2%E6%9C%8D%E8%8E%B7%E5%8F%96%E5%85%8D%E8%B4%B9%E8%AF%95%E7%94%A8%E7%89%88%E6%9C%AC%EF%BC%89\">http://download.bigemap.com/bmsetup.rar（可以联系bigmap官方客服获取免费试用版本）</a><br>在bigmap中点击<code>导入边界</code>，选择上一步中导出的<code>fanwei.shp</code>，选择合适的层级（一般13-16级之间，试用用户最高可选14级），点击确定即可下载。默认会下载.tif格式图片。</p>\n<p><img src=\"https://s3.bmp.ovh/imgs/2022/09/03/b7a18896e0894514.png\" alt=\"导入fanwei.shp\"></p>\n<h3 id=\"3-Blender处理SHP数据\"><a href=\"#3-Blender处理SHP数据\" class=\"headerlink\" title=\"3.Blender处理SHP数据\"></a>3.Blender处理SHP数据</h3><h5 id=\"3-1-安装相应软件及插件\"><a href=\"#3-1-安装相应软件及插件\" class=\"headerlink\" title=\"3.1 安装相应软件及插件\"></a>3.1 安装相应软件及插件</h5><p>首先需要安装blender、GIS插件和Datasmith插件<br>blender获取网址为<a href=\"https://www.blender.org/download/\">https://www.blender.org/download/</a><br>GIS插件获取网址为<a href=\"https://github.com/domlysz/BlenderGIS\">https://github.com/domlysz/BlenderGIS</a><br>Datasmith插件获取网址为<a href=\"https://github.com/0xafbf/blender-datasmith-export\">https://github.com/0xafbf/blender-datasmith-export</a></p>\n<p>在blender中点击菜单栏<code>编辑-偏好设置-插件-安装</code>，在弹出的窗口中选择<code>blenderGIS.zip</code>和<code>blender-datasmith-export</code>文件后点击安装插件，安装后记得在插件前打勾激活。</p>\n<p><img src=\"https://s3.bmp.ovh/imgs/2022/09/03/4f7785fe04524305.png\" alt=\"安装插件\"><br><img src=\"https://s3.bmp.ovh/imgs/2022/09/03/c7091d64d3406931.png\" alt=\"安装插件\"></p>\n<p>（在安装blender-datasmith-export时blender会报错Traceback(most recent call last)，这是因为压缩包文件名为<code>  blender-datasmith-export-1.0.1.zip</code>,此时需要删除压缩文件中的<code>-1.0.1</code>后在进行安装即可解决报错问题。）</p>\n<p><img src=\"https://s3.bmp.ovh/imgs/2022/09/03/832a3fd1b51b3700.png\" alt=\"报错名称\"><br><img src=\"https://s3.bmp.ovh/imgs/2022/09/03/948e5c4b0b9dc47e.png\" alt=\"解决报错\"></p>\n<h5 id=\"3-2-导入建筑数据\"><a href=\"#3-2-导入建筑数据\" class=\"headerlink\" title=\"3.2 导入建筑数据\"></a>3.2 导入建筑数据</h5><p>点击GIS插件导入shp数据，导入时的具体参数见图，导入时间会因模型数据的大小而有所区别，等待即可。以相同方法导入<code>ways.shp</code>和<code>fanwei.shp</code>（导入参数默认即可）。</p>\n<p><img src=\"https://s3.bmp.ovh/imgs/2022/08/02/b55c38a49d42660c.png\" alt=\"blender导入shps数据时使用的参数\"></p>\n<h5 id=\"3-3-道路数据处理\"><a href=\"#3-3-道路数据处理\" class=\"headerlink\" title=\"3.3 道路数据处理\"></a>3.3 道路数据处理</h5><p>点击GIS插件导入shp数据，导入成功后需要对道路进行处理，shp数据的道路只是线条，需要在blender中转换为曲面。<br>####### 3.3.1 创建道路宽度<br>具体操作方法为：1.选择道路层级；2.点击左上角<code>物体-转换到-曲线</code>；3.点击右下角<code>物件属性</code>；4.点击左上角<code>添加-曲线-路径曲线</code>；5.点击道路层级，点击点击右下角<code>物件属性</code>，找到<code>几何数据-倒角-物体</code>，选择我们刚才新建的<code>NURBS路径</code>。完成后道路就有了宽度。<br>####### 3.3.2 调整道路宽度<br>点击新建的NURBS路径-条目(N)-变换-缩放x轴，数值不宜过大，2或3即可。</p>\n<h5 id=\"3-4-地面贴图处理\"><a href=\"#3-4-地面贴图处理\" class=\"headerlink\" title=\"3.4 地面贴图处理\"></a>3.4 地面贴图处理</h5><p>在blender中新建平面，大小位置与导入的<code>fanwei.shp</code>一致，新建材质，将贴图设置为从bigmap中下载的.tif图片，把材质赋给新建平面。</p>\n<h5 id=\"3-5-导出datasmith文件\"><a href=\"#3-5-导出datasmith文件\" class=\"headerlink\" title=\"3.5 导出datasmith文件\"></a>3.5 导出datasmith文件</h5><p>在blender中选择<code>文件-导出-datasmith</code>。导出时间会因模型数据的大小而有所区别，等待即可。</p>\n<p>至此模型的处理已经完成。</p>\n<p><img src=\"https://s3.bmp.ovh/imgs/2022/08/02/e1f1c325ad999ac2.png\" alt=\"最终模型\"></p>\n","feature":true,"text":"1.使用QGIS获取地图数据数据QGIS获取网址为https://github.com/qgis/QGIS 1.1 处理建筑数据QGIS默认状态下为英文，可以参...","permalink":"/post/Design_UE4ZhiHuiChengShi1","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":1,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"学习笔记","slug":"学习笔记","count":1,"path":"api/tags/学习笔记.json"},{"name":"UE4虚幻引擎","slug":"UE4虚幻引擎","count":1,"path":"api/tags/UE4虚幻引擎.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E4%BD%BF%E7%94%A8QGIS%E8%8E%B7%E5%8F%96%E5%9C%B0%E5%9B%BE%E6%95%B0%E6%8D%AE%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">1.使用QGIS获取地图数据数据</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-1-%E5%A4%84%E7%90%86%E5%BB%BA%E7%AD%91%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">1.1 处理建筑数据</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-2-%E5%AE%89%E8%A3%85quickOSM%E8%8E%B7%E5%8F%96%E9%81%93%E8%B7%AF%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">1.2 安装quickOSM获取道路数据</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-3-%E4%BD%BF%E7%94%A8QuickOSM%E8%8E%B7%E5%8F%96%E9%81%93%E8%B7%AF%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">1.3 使用QuickOSM获取道路数据</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-4-%E5%AF%BC%E5%87%BA%E9%81%93%E8%B7%AF%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">1.4 导出道路数据</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-5-%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E5%8C%BA%E5%9F%9F%E8%8C%83%E5%9B%B4\"><span class=\"toc-text\">1.5 获取当前区域范围</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-Bigmap%E8%8E%B7%E5%8F%96%E7%9F%A9%E5%BD%A2%E8%8C%83%E5%9B%B4%E5%8D%AB%E6%98%9F%E5%9C%B0%E5%9B%BE\"><span class=\"toc-text\">2.Bigmap获取矩形范围卫星地图</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-Blender%E5%A4%84%E7%90%86SHP%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">3.Blender处理SHP数据</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-1-%E5%AE%89%E8%A3%85%E7%9B%B8%E5%BA%94%E8%BD%AF%E4%BB%B6%E5%8F%8A%E6%8F%92%E4%BB%B6\"><span class=\"toc-text\">3.1 安装相应软件及插件</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-2-%E5%AF%BC%E5%85%A5%E5%BB%BA%E7%AD%91%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">3.2 导入建筑数据</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-3-%E9%81%93%E8%B7%AF%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86\"><span class=\"toc-text\">3.3 道路数据处理</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-4-%E5%9C%B0%E9%9D%A2%E8%B4%B4%E5%9B%BE%E5%A4%84%E7%90%86\"><span class=\"toc-text\">3.4 地面贴图处理</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-5-%E5%AF%BC%E5%87%BAdatasmith%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">3.5 导出datasmith文件</span></a></li></ol></li></ol></li></ol>","author":{"name":"HuaYang","slug":"huayang","avatar":"https://s3.bmp.ovh/imgs/2022/07/05/f30c5a60868494ae.png","link":"https://github.com/metahmi","description":"LIFE AND DREAM","socials":{"github":"https://github.com/metahmi","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{},"next_post":{"title":"《道德经》","uid":"312358575060edb28109878bb25fc4a0","slug":"DaoDeJing_1","date":"2022-12-01T00:00:00.000Z","updated":"2025-01-09T04:38:12.970Z","comments":true,"path":"api/articles/DaoDeJing_1.json","keywords":null,"cover":"https://ts1.cn.mm.bing.net/th/id/R-C.10b683b49704f76034f8eab74a07354e?rik=W5yDxXwZ475c7Q&riu=http%3a%2f%2fwww.9610.com%2fzhmf%2fdaodejing%2f302.jpg&ehk=ubqHjFFbRKQHva8p2ocGD4%2fAtHI3W14Ytsqmc56dS7o%3d&risl=&pid=ImgRaw&r=0","text":"【第一章】道可道，非常道；名可名，非常名。无名天地之始，有名万物之母。故常无欲，以观其妙；常有欲，以观其徼（jiào）。此两者同出而异名，同谓之玄，玄之又玄，众...","permalink":"/post/DaoDeJing_1","photos":[],"count_time":{"symbolsCount":"7.8k","symbolsTime":"7 mins."},"categories":[{"name":"道德经","slug":"道德经","count":1,"path":"api/categories/道德经.json"}],"tags":[{"name":"道德经","slug":"道德经","count":1,"path":"api/tags/道德经.json"},{"name":"老子","slug":"老子","count":1,"path":"api/tags/老子.json"}],"author":{"name":"无限星火","slug":"blog-author","avatar":"https://s3.bmp.ovh/imgs/2022/08/24/745a612bca277e56.png","link":"/","description":"LIFE AND DREAM","socials":{"github":"https://github.com/META-HY","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}